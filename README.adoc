image:https://raw.githubusercontent.com/hyperpolymath/palimpsest-license/main/assets/badges/svg/badge-standard.svg[PMPL-1.0,link="https://github.com/hyperpolymath/palimpsest-license"]


// SPDX-License-Identifier: PLMP-1.0-or-later
= Hypatia: Neurosymbolic CI/CD Intelligence Platform
:toc: macro
:toclevels: 3
:icons: font
:website: https://hypatia.reposystem.dev

image:https://img.shields.io/badge/Logtalk-Rules-orange.svg[Logtalk]
image:https://img.shields.io/badge/Haskell-Verification-5D4F85.svg[Haskell]
image:https://img.shields.io/badge/ArangoDB-Graph-green.svg[ArangoDB]
image:https://img.shields.io/badge/Ada_2022-TUI-blue.svg[Ada]

ðŸŒ *Website:* https://hypatia.reposystem.dev[hypatia.reposystem.dev] | Part of the link:https://reposystem.dev[reposystem] ecosystem

toc::[]

== Overview

*Hypatia* is a neurosymbolic CI/CD intelligence platform that combines:

* *Neural Learning*: Pattern recognition from CI/CD failures across ecosystems
* *Symbolic Reasoning*: Logtalk/Prolog rules for fast, deterministic actions
* *Formal Verification*: Haskell-based ruleset validation and registry
* *Graph Intelligence*: ArangoDB for relationship modeling
* *Distributed Cache*: Dragonfly for sub-millisecond rule lookups
* *P2P Federation*: Radicle for decentralized ruleset distribution

=== Core Philosophy

[quote]
"Dumb rules from smart learning"

The system learns complex patterns through neural analysis, then *distills* them into simple, fast-acting declarative rules that can be:

* Pre-emptively injected into new repositories
* Applied as cures to existing repositories  
* Executed without ML inference overhead
* Formally verified for correctness

== Architecture

[source]
----
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Hypatia Platform                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 VERIFICATION LAYER (Haskell)                    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚ Type-Safe   â”‚  â”‚ Property    â”‚  â”‚ Formal Proof          â”‚   â”‚ â”‚
â”‚  â”‚  â”‚ Ruleset DSL â”‚  â”‚ Testing     â”‚  â”‚ (Liquid Haskell)      â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                          â”‚                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚              RULESET REGISTRY (Git-Native)               â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  - Deposit: Submit verified rulesets                     â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  - Withdraw: Pull rulesets for local use                 â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  - Authority: Signed, versioned, auditable               â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                 LEARNING LAYER (Neural)                        â”‚ â”‚
â”‚  â”‚  Pattern Recognition â†’ Anomaly Detection â†’ Rule Distillation   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              SYMBOLIC LAYER (Logtalk + Prolog)                 â”‚ â”‚
â”‚  â”‚  Declarative Rules â”‚ Imperative Procedures â”‚ Inference Engine  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    DATA LAYER                                   â”‚ â”‚
â”‚  â”‚  ArangoDB (Graph) â”‚ Dragonfly (Cache) â”‚ Radicle (P2P Git)      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                   ACTION LAYER                                  â”‚ â”‚
â”‚  â”‚  robot-repo-automaton â”‚ Hooks â”‚ Diagnostics â”‚ Auto-Repair      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                              â”‚                                       â”‚
â”‚                              â–¼                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                  FORGE ADAPTERS                                 â”‚ â”‚
â”‚  â”‚  GitHub â”‚ GitLab â”‚ Bitbucket â”‚ Codeberg â”‚ sr.ht â”‚ Gitea        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
----

== Installation

=== Docker (Recommended)

Pull from GitHub Container Registry:

[source,bash]
----
# Latest stable release
docker pull ghcr.io/hyperpolymath/hypatia-cli:latest

# Or specific version
docker pull ghcr.io/hyperpolymath/hypatia-cli:0.1.0

# All components
docker pull ghcr.io/hyperpolymath/hypatia-cli:latest
docker pull ghcr.io/hyperpolymath/hypatia-adapter:latest
docker pull ghcr.io/hyperpolymath/hypatia-registry:latest
docker pull ghcr.io/hyperpolymath/hypatia-engine:latest
----

Run the CLI:

[source,bash]
----
docker run --rm ghcr.io/hyperpolymath/hypatia-cli:latest scan /repo
----

=== Binary Release

Download from GitHub Releases:

[source,bash]
----
# Linux x86_64
curl -sSL https://github.com/hyperpolymath/hypatia/releases/latest/download/hypatia-x86_64-unknown-linux-gnu.tar.gz | tar xz
sudo mv hyper /usr/local/bin/

# macOS (Apple Silicon)
curl -sSL https://github.com/hyperpolymath/hypatia/releases/latest/download/hypatia-aarch64-apple-darwin.tar.gz | tar xz
sudo mv hyper /usr/local/bin/

# macOS (Intel)
curl -sSL https://github.com/hyperpolymath/hypatia/releases/latest/download/hypatia-x86_64-apple-darwin.tar.gz | tar xz
sudo mv hyper /usr/local/bin/
----

=== Docker Compose

For full stack deployment:

[source,yaml]
----
services:
  hyper-cli:
    image: ghcr.io/hyperpolymath/hypatia-cli:latest
    volumes:
      - ./repos:/repos
    environment:
      - HYPER_REGISTRY_URL=http://registry:8080

  adapter:
    image: ghcr.io/hyperpolymath/hypatia-adapter:latest
    environment:
      - GITHUB_TOKEN=${GITHUB_TOKEN}

  registry:
    image: ghcr.io/hyperpolymath/hypatia-registry:latest
    ports:
      - "8080:8080"

  engine:
    image: ghcr.io/hyperpolymath/hypatia-engine:latest
----

=== Kubernetes / Helm

[source,bash]
----
helm repo add cicd-hyper-a https://hyperpolymath.github.io/cicd-hyper-a
helm install cicd-hyper-a hypatia/hypatia
----

== Haskell Verification Registry

The *Ruleset Registry* is a Haskell-based system providing:

=== Type-Safe Ruleset DSL

[source,haskell]
----
{-# LANGUAGE GADTs #-}
{-# LANGUAGE DataKinds #-}

module CicdHyperA.Ruleset where

-- | Rule effect types
data Effect = Preventive | Curative | Diagnostic

-- | Type-safe rule definition
data Rule (e :: Effect) where
  PreventiveRule :: RuleName -> Condition -> Action -> Rule 'Preventive
  CurativeRule   :: RuleName -> Pattern -> Fix -> Rule 'Curative
  DiagnosticRule :: RuleName -> Check -> Report -> Rule 'Diagnostic

-- | Condition language
data Condition
  = FileExists FilePath
  | FileContains FilePath Pattern
  | LanguageUsed Language
  | DependencyPresent Package
  | And Condition Condition
  | Or Condition Condition
  | Not Condition

-- | Example rules
requireDependabot :: Rule 'Preventive
requireDependabot = PreventiveRule
  "require-dependabot"
  (Not (FileExists ".github/dependabot.yml"))
  (InjectFile ".github/dependabot.yml" dependabotTemplate)

blockTypeScript :: Rule 'Preventive  
blockTypeScript = PreventiveRule
  "block-typescript"
  (Or (LanguageUsed TypeScript) (FileExists "*.ts"))
  (RejectCommit "TypeScript not allowed per RSR policy")
----

=== Property-Based Testing

[source,haskell]
----
module CicdHyperA.Properties where

import Test.QuickCheck

-- | Rules must be deterministic
prop_deterministic :: Rule e -> Repo -> Bool
prop_deterministic rule repo =
  evaluate rule repo == evaluate rule repo

-- | Preventive rules must not modify existing files
prop_preventive_safe :: Rule 'Preventive -> Repo -> Property
prop_preventive_safe rule repo =
  let repo' = apply rule repo
  in all (unchanged repo repo') (existingFiles repo)

-- | Curative rules must improve health score
prop_curative_improves :: Rule 'Curative -> Repo -> Property
prop_curative_improves rule repo =
  healthScore repo < healthScore (apply rule repo)
----

=== Formal Verification (Liquid Haskell)

[source,haskell]
----
{-@ LIQUID "--reflection" @-}

module CicdHyperA.Verified where

-- | Refinement type: health score always in range
{-@ type HealthScore = {v:Int | 0 <= v && v <= 100} @-}

-- | Verified: curative rules never decrease health
{-@ curativeImproves :: Rule 'Curative -> Repo -> 
      {r:Repo | healthScore r >= healthScore repo} @-}
curativeImproves :: Rule 'Curative -> Repo -> Repo
curativeImproves rule repo = apply rule repo

-- | Verified: preventive rules preserve existing content
{-@ preventiveSafe :: Rule 'Preventive -> Repo ->
      {r:Repo | existingFiles r == existingFiles repo} @-}
preventiveSafe :: Rule 'Preventive -> Repo -> Repo
preventiveSafe rule repo = apply rule repo
----

=== Registry Operations

[cols="1,3"]
|===
| Operation | Description

| `deposit`
| Submit a verified ruleset to the registry. Requires passing all property tests and formal verification.

| `withdraw`
| Pull a ruleset for local use. Includes signature verification and version pinning.

| `search`
| Query rulesets by effect type, target forge, language, or category.

| `audit`
| View the complete history of a ruleset including all changes and verifications.

| `fork`
| Create a derived ruleset with custom modifications while maintaining provenance.
|===

[source,bash]
----
# Deposit a new ruleset
cicd-hyper-a deposit ./my-ruleset.hs \
  --name "rust-security-hardening" \
  --description "Security rules for Rust projects" \
  --sign --verify

# Withdraw for local use
cicd-hyper-a withdraw rust-security-hardening \
  --version "1.2.0" \
  --output ./rules/

# Search for rulesets
cicd-hyper-a search --effect preventive --language rust

# Audit a ruleset
cicd-hyper-a audit rust-security-hardening --full
----

== Integration with robot-repo-automaton

The platform integrates with link:https://github.com/hyperpolymath/robot-repo-automaton[robot-repo-automaton] for automated repository management:

[source,yaml]
----
# robot-repo-automaton/config.yml
cicd_hyper_a:
  enabled: true
  registry_url: https://registry.cicd-hyper-a.hyperpolymath.dev
  
  # Rulesets to apply to all repos
  global_rulesets:
    - hyperpolymath/rsr-compliance
    - hyperpolymath/security-baseline
    - hyperpolymath/quality-gates
  
  # Language-specific rulesets
  language_rulesets:
    rust:
      - hyperpolymath/rust-clippy-strict
      - hyperpolymath/rust-fuzzing
    rescript:
      - hyperpolymath/rescript-deno
    gleam:
      - hyperpolymath/gleam-beam
  
  # Automation settings
  automation:
    auto_fix_threshold: 0.95  # Auto-apply fixes with >95% confidence
    pr_threshold: 0.80        # Create PR for 80-95% confidence
    alert_threshold: 0.50     # Alert human for <80% confidence
----

=== Hook Integration

[source,bash]
----
#!/bin/bash
# .git/hooks/pre-commit (injected by cicd-hyper-a)

# Load rulesets from registry (cached in Dragonfly)
cicd-hyper-a hooks pre-commit \
  --rulesets hyperpolymath/rsr-compliance \
  --cache-ttl 3600

# Runs preventive rules:
# - Language policy (no TS, Go, Python, Makefile)
# - Secret detection
# - Formatting checks
# - License headers
----

[source,bash]
----
#!/bin/bash
# .git/hooks/pre-push

cicd-hyper-a hooks pre-push \
  --rulesets hyperpolymath/security-baseline \
  --verify-signatures

# Runs validation:
# - All commits signed
# - CI simulation passes
# - No breaking API changes
----

== Logtalk Rule Engine

The symbolic layer uses Logtalk for high-performance rule execution:

[source,prolog]
----
:- object(cicd_rules).

    %% DECLARATIVE RULES
    repo_must_have(Repo, 'dependabot.yml') :-
        repo_uses_dependencies(Repo).
    repo_must_have(Repo, 'SECURITY.md') :-
        repo_is_public(Repo).

    %% PREVENTIVE RULES
    block_commit_if(Commit, typescript_detected) :-
        commit_adds_file(Commit, File),
        file_extension(File, '.ts').
    block_commit_if(Commit, secret_detected) :-
        commit_content_matches(Commit, Pattern),
        secret_pattern(Pattern).

    %% CURATIVE RULES
    auto_fix(Repo, unpinned_actions) :-
        find_unpinned_actions(Repo, Actions),
        pin_actions_to_sha(Repo, Actions).

:- end_object.
----

== Data Layer

=== ArangoDB Graph Schema

[source,json]
----
{
  "collections": {
    "repos": { "type": "document" },
    "rules": { "type": "document" },
    "patterns": { "type": "document" },
    "rulesets": { "type": "document" }
  },
  "edge_collections": {
    "repo_uses_ruleset": { "from": ["repos"], "to": ["rulesets"] },
    "ruleset_contains": { "from": ["rulesets"], "to": ["rules"] },
    "rule_derived_from": { "from": ["rules"], "to": ["patterns"] }
  }
}
----

=== Dragonfly Cache Strategy

[source,yaml]
----
# Compiled rules for instant execution
rules:
  key: "rule:{ruleset}:{rule_id}"
  ttl: 3600
  data: compiled_bytecode

# Repo state for quick lookups
repos:
  key: "repo:{forge}:{owner}:{name}"
  ttl: 300
  data: { health_score, issues, rulesets_applied }

# Registry index for fast search
registry:
  key: "registry:index:{category}"
  ttl: 86400
  data: [ruleset_ids]
----

== Repository Structure

[source]
----
cicd-hyper-a/
â”œâ”€â”€ registry/                    # Haskell verification registry
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ CicdHyperA/
â”‚   â”‚   â”‚   â”œâ”€â”€ Ruleset.hs      # Type-safe DSL
â”‚   â”‚   â”‚   â”œâ”€â”€ Verify.hs       # Property tests
â”‚   â”‚   â”‚   â”œâ”€â”€ Liquid.hs       # Formal proofs
â”‚   â”‚   â”‚   â”œâ”€â”€ Registry.hs     # Git-based storage
â”‚   â”‚   â”‚   â””â”€â”€ API.hs          # REST/GraphQL API
â”‚   â”‚   â””â”€â”€ Main.hs
â”‚   â”œâ”€â”€ test/
â”‚   â””â”€â”€ cicd-hyper-a.cabal
â”‚
â”œâ”€â”€ engine/                      # Logtalk rule engine
â”‚   â”œâ”€â”€ rules/
â”‚   â”‚   â”œâ”€â”€ cicd_rules.lgt
â”‚   â”‚   â”œâ”€â”€ rule_distiller.lgt
â”‚   â”‚   â””â”€â”€ forge_adapters.lgt
â”‚   â””â”€â”€ loader.lgt
â”‚
â”œâ”€â”€ hooks/                       # Git hook templates
â”‚   â”œâ”€â”€ pre-commit
â”‚   â”œâ”€â”€ pre-push
â”‚   â””â”€â”€ post-receive
â”‚
â”œâ”€â”€ schemas/                     # Data schemas
â”‚   â”œâ”€â”€ arangodb.json
â”‚   â”œâ”€â”€ dragonfly.yml
â”‚   â””â”€â”€ ruleset.schema.json
â”‚
â”œâ”€â”€ adapters/                    # Forge adapters
â”‚   â”œâ”€â”€ github.rs
â”‚   â”œâ”€â”€ gitlab.rs
â”‚   â”œâ”€â”€ bitbucket.rs
â”‚   â””â”€â”€ radicle.rs
â”‚
â”œâ”€â”€ integration/                 # External integrations
â”‚   â”œâ”€â”€ robot-repo-automaton/
â”‚   â””â”€â”€ gitvisor/
â”‚
â””â”€â”€ deploy/                      # Deployment configs
    â”œâ”€â”€ k8s/
    â”œâ”€â”€ docker-compose.yml
    â””â”€â”€ helm/
----

== Roadmap

=== Phase 1: Foundation âœ… Complete
* [x] Logtalk rule engine with formal schema
* [x] ArangoDB graph model v2
* [x] Haskell DSL and registry
* [x] Basic CLI with all commands

=== Phase 2: Verification âœ… 90% Complete
* [x] Property-based testing framework
* [x] Idris 2 type-safe state machines
* [x] Fuel-based termination proofs
* [ ] Liquid Haskell integration (pending)

=== Phase 3: Integration âœ… 90% Complete
* [x] robot-repo-automaton connector
* [x] Hook injection system (pre-commit, pre-push, post-receive)
* [x] 4/6 forge adapters (GitHub, GitLab, Bitbucket, Codeberg)
* [x] Dragonfly caching configs
* [ ] sourcehut and radicle adapters (pending)

=== Phase 4: Scale ðŸ”„ In Progress
* [x] K8s manifests and Helm chart
* [x] Docker Compose production config
* [x] Monitoring (Prometheus/Grafana)
* [ ] Radicle P2P federation (pending)
* [ ] Public registry launch (pending)
* [ ] Enterprise features (pending)

== Documentation

* link:CII-ENFORCEMENT.adoc[CII Best Practices Badge Enforcement] - Centralized vs local enforcement architecture
* link:PALIMPSEST.adoc[Palimpsest Philosophy] - Philosophical underpinnings

== Related Projects

* link:https://github.com/hyperpolymath/robot-repo-automaton[robot-repo-automaton] - Automated repository management
* link:https://github.com/hyperpolymath/gitvisor[gitvisor] - CI/CD intelligence system
* link:https://github.com/hyperpolymath/rhodium-standard-repositories[rhodium-standard-repositories] - Repository standards
* link:https://github.com/hyperpolymath/palimpsest-license[palimpsest-license] - Philosophical licence
* link:https://www.bestpractices.dev[OpenSSF Best Practices Badge] - Security certification program

== License

This project is licensed under link:https://github.com/hyperpolymath/palimpsest-license[PMPL-1.0-or-later] (Palimpsest-MPL License).

The Palimpsest License is a file-level copyleft license with ethical use provisions, following the Mozilla approach.

image::https://img.shields.io/badge/license-PMPL--1.0--or--later-blue.svg[License: PMPL-1.0-or-later, link=https://github.com/hyperpolymath/palimpsest-license]
